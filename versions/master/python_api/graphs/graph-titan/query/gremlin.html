<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>TitanGraphQuery gremlin &mdash; Trusted Analytics Platform 0.4.0 documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../../../../_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '0.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" >
    <link rel="top" title="Trusted Analytics Platform 0.4.0 documentation" href="../../../../index.html" >
    <link rel="up" title="Graphs TitanGraph" href="../index.html" >
    <link rel="next" title="TitanGraph status" href="../status.html" >
    <link rel="prev" title="TitanGraph name" href="../name.html" > 
  </head>
  <body>

  <div class="container">
    <div class="header">
    </div>
  </div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../../../../index.html">Trusted Analytics</a></li>
	
          <li class="active"><a href="../../../index.html" >Python API</a></li>
          <li class="active"><a href="../../index.html" >Graphs</a></li>
          <li class="active"><a href="../index.html" accesskey="U"><code class="docutils literal"><span class="pre">Graphs</span></code> TitanGraph</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../name.html" title="TitanGraph name"
           accesskey="P">previous</a>
      </li>
      <li class="active">
        <a href="../status.html" title="TitanGraph status"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="../../../../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3><a href="../../../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../intro.html">Technical Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ds_over.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_over.html">Extending Trusted Analytics Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ad_over.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rest_api/v1/index.html">REST API</a></li>
</ul>
<ul class="simple">
</ul>

        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="titangraphquery-gremlin">
<h1><a class="reference internal" href="../index.html"><em>TitanGraphQuery</em></a>  gremlin<a class="headerlink" href="#titangraphquery-gremlin" title="Permalink to this headline">¶</a></h1>
<hr class="docutils" />
<dl class="function">
<dt id="query.gremlin">
<code class="descclassname">query.</code><code class="descname">gremlin</code><span class="sig-paren">(</span><em>self</em>, <em>gremlin</em><span class="sig-paren">)</span><a class="headerlink" href="#query.gremlin" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a Gremlin query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gremlin</strong> : unicode</p>
<blockquote>
<div><p>The Gremlin script to execute.</p>
<p>Examples of Gremlin queries:</p>
<p>g.V[0..9] - Returns the first 10 vertices in graph
g.V.userId - Returns the userId property from vertices
g.V(&#8216;name&#8217;,&#8217;hercules&#8217;).out(&#8216;father&#8217;).out(&#8216;father&#8217;).name - Returns the name of Hercules&#8217; grandfather</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">: dict</p>
<blockquote class="last">
<div><p>List of query results serialized to JSON and runtime of Gremlin query in seconds.
The list of results is in GraphSON format(for vertices or edges) or JSON (for other results like counts).
GraphSON is a JSON-based format for property graphs which uses reserved keys
that begin with underscores to encode vertex and edge metadata.</p>
<p>Examples of valid GraphSON:</p>
<div class="highlight-python"><div class="highlight"><pre>{ \&quot;name\&quot;: \&quot;lop\&quot;, \&quot;lang\&quot;: \&quot;java\&quot;,\&quot;_id\&quot;: \&quot;3\&quot;, \&quot;_type\&quot;: \&quot;vertex\&quot; }
{ \&quot;weight\&quot;: 1, \&quot;_id\&quot;: \&quot;8\&quot;, \&quot;_type\&quot;: \&quot;edge\&quot;, \&quot;_outV\&quot;: \&quot;1\&quot;, \&quot;_inV\&quot;: \&quot;4\&quot;, \&quot;_label\&quot;: \&quot;knows\&quot; }
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/tinkerpop/blueprints/wiki/GraphSON-Reader-and-Writer-Library">https://github.com/tinkerpop/blueprints/wiki/GraphSON-Reader-and-Writer-Library</a></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>Executes a Gremlin query on an existing graph.</p>
<p class="rubric">Notes</p>
<p>The query does not support pagination so the results of query should be limited
using the Gremlin range filter [i..j], for example, g.V[0..9] to return the
first 10 vertices.</p>
<p class="rubric">Examples</p>
<p>Get the first two outgoing edges of the vertex whose source equals 5767244:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mygraph</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">get_graph</span><span class="p">(</span><span class="s">&quot;mytitangraph&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">mygraph</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="s">&quot;g.V(&#39;source&#39;, 5767244).outE[0..1]&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;results&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The expected output is a list of edges in GraphSON format:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="p">[{</span><span class="s">u&#39;_label&#39;</span><span class="p">:</span> <span class="s">u&#39;edge&#39;</span><span class="p">,</span> <span class="s">u&#39;_type&#39;</span><span class="p">:</span> <span class="s">u&#39;edge&#39;</span><span class="p">,</span> <span class="s">u&#39;_inV&#39;</span><span class="p">:</span> <span class="mi">1381202500</span><span class="p">,</span> <span class="s">u&#39;weight&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">u&#39;_outV&#39;</span><span class="p">:</span> <span class="mi">1346400004</span><span class="p">,</span> <span class="s">u&#39;_id&#39;</span><span class="p">:</span> <span class="s">u&#39;fDEQC9-1t7m96-1U&#39;</span><span class="p">},{</span><span class="s">u&#39;_label&#39;</span><span class="p">:</span> <span class="s">u&#39;edge&#39;</span><span class="p">,</span> <span class="s">u&#39;_type&#39;</span><span class="p">:</span> <span class="s">u&#39;edge&#39;</span><span class="p">,</span> <span class="s">u&#39;_inV&#39;</span><span class="p">:</span> <span class="mi">1365600772</span><span class="p">,</span> <span class="s">u&#39;weight&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">u&#39;_outV&#39;</span><span class="p">:</span> <span class="mi">1346400004</span><span class="p">,</span> <span class="s">u&#39;_id&#39;</span><span class="p">:</span> <span class="s">u&#39;frtzv9-1t7m96-1U&#39;</span><span class="p">}]</span>
</pre></div>
</div>
<p>Get the count of incoming edges for a vertex:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">mygraph</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="s">&quot;g.V(&#39;target&#39;, 5767243).inE.count()&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;results&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The expected output is:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<p>Get the count of name and age properties from vertices:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">mygraph</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">gremlin</span><span class="p">(</span><span class="s">&quot;g.V.transform{[it.name, it.age]}[0..10])&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">results</span><span class="p">[</span><span class="s">&quot;results&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The expected output is:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">u&#39;[&quot;alice&quot;, 29]&#39;</span><span class="p">,</span> <span class="s">u&#39;[ &quot;bob&quot;, 45 ]&#39;</span><span class="p">,</span> <span class="s">u&#39;[&quot;cathy&quot;, 34 ]&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2015, Intel.
      </li>
      <li>
      Last updated on Dec 07, 2015.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>